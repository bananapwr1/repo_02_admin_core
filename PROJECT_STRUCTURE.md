# üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã Admin Panel Bot.

## üóÇ –û–±–∑–æ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```
/workspace/
‚îÇ
‚îú‚îÄ‚îÄ üìÑ bot.py                      # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞
‚îú‚îÄ‚îÄ üìÑ requirements.txt            # –°–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π Python
‚îú‚îÄ‚îÄ üìÑ .env                        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–Ω–µ –≤ git!)
‚îú‚îÄ‚îÄ üìÑ .env.example               # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ üìÑ .gitignore                 # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è git
‚îÇ
‚îú‚îÄ‚îÄ üìÑ README.md                  # –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ üìÑ QUICKSTART.md              # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
‚îú‚îÄ‚îÄ üìÑ DEPLOYMENT.md              # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
‚îú‚îÄ‚îÄ üìÑ CHANGELOG.md               # –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚îú‚îÄ‚îÄ üìÑ PROJECT_STRUCTURE.md       # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îÇ
‚îú‚îÄ‚îÄ üìÑ supabase_schema.sql        # SQL-—Å—Ö–µ–º–∞ –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ
‚îú‚îÄ‚îÄ üìÅ config/                    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ settings.py               # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ .env
‚îÇ
‚îú‚îÄ‚îÄ üìÅ database/                  # –†–∞–±–æ—Ç–∞ —Å Supabase
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ supabase_connector.py     # –ö–ª–∞—Å—Å –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å –ë–î
‚îÇ
‚îú‚îÄ‚îÄ üìÅ handlers/                  # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py               # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–æ—É—Ç–µ—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ start_handler.py          # /start, /help, /stats
‚îÇ   ‚îú‚îÄ‚îÄ users_handler.py          # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ strategies_handler.py     # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ tokens_handler.py         # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ logs_handler.py           # –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ ai_chat_handler.py        # AI-–¥–∏–∞–ª–æ–≥
‚îÇ   ‚îî‚îÄ‚îÄ settings_handler.py       # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞
‚îÇ
‚îú‚îÄ‚îÄ üìÅ keyboards/                 # –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã Telegram
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ admin_keyboards.py        # –í—Å–µ inline –∏ reply –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îÇ
‚îú‚îÄ‚îÄ üìÅ middleware/                # Middleware –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ admin_middleware.py       # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∞
‚îÇ
‚îú‚îÄ‚îÄ üìÅ services/                  # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ ai_strategy_service.py    # –†–∞–±–æ—Ç–∞ —Å OpenAI API
‚îÇ
‚îî‚îÄ‚îÄ üìÅ utils/                     # –£—Ç–∏–ª–∏—Ç—ã
    ‚îú‚îÄ‚îÄ __init__.py
    ‚îú‚îÄ‚îÄ formatters.py             # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
    ‚îî‚îÄ‚îÄ validators.py             # –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
```

## üìÑ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã

### bot.py
**–ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**

–§—É–Ω–∫—Ü–∏–∏:
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞ –∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è middleware –∏ —Ä–æ—É—Ç–µ—Ä–æ–≤
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ startup/shutdown
- –ó–∞–ø—É—Å–∫ polling

```python
# –û—Å–Ω–æ–≤–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
if __name__ == "__main__":
    asyncio.run(main())
```

### requirements.txt
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞**

```
aiogram==3.4.1          # Telegram Bot Framework
supabase==2.3.4         # Database Client
openai==1.12.0          # AI Integration
python-dotenv==1.0.0    # Environment Variables
pydantic==2.6.1         # Data Validation
aiohttp==3.9.3          # HTTP Client
```

### .env
**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª (–Ω–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏)**

–°–æ–¥–µ—Ä–∂–∏—Ç:
- Telegram Bot Token
- Supabase credentials
- OpenAI API Key
- –°–ø–∏—Å–æ–∫ –∞–¥–º–∏–Ω–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞

## üìÅ –ú–æ–¥—É–ª–∏

### üîß config/

#### settings.py
**–ö–ª–∞—Å—Å Settings** - –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```python
class Settings:
    TELEGRAM_BOT_TOKEN: str
    SUPABASE_URL: str
    SUPABASE_KEY: str
    OPENAI_API_KEY: str
    ADMIN_IDS: list[int]
    BOT_NAME: str
    WELCOME_MESSAGE: str
```

–ó–∞–≥—Ä—É–∂–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ .env –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏—Ö –≤—Å–µ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é.

### üóÑ database/

#### supabase_connector.py
**–ö–ª–∞—Å—Å SupabaseConnector** - –†–∞–±–æ—Ç–∞ —Å –ë–î

–ú–µ—Ç–æ–¥—ã:
- `get_all_users()` - –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `get_user_by_id()` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ ID
- `update_user_status()` - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞/—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
- `update_user_subscription()` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
- `create_invite_token()` - –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
- `get_all_strategies()` - –°–ø–∏—Å–æ–∫ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
- `create_strategy()` - –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- `get_system_logs()` - –°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏
- `get_decision_logs()` - –õ–æ–≥–∏ —Ä–µ—à–µ–Ω–∏–π AI
- –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ...

Singleton –ø–∞—Ç—Ç–µ—Ä–Ω:
```python
db = SupabaseConnector()
```

### üéÆ handlers/

–ö–∞–∂–¥—ã–π handler –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ—é –æ–±–ª–∞—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏.

#### start_handler.py
- `/start` - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- `/help` - –°–ø—Ä–∞–≤–∫–∞
- `/stats` - –ë—ã—Å—Ç—Ä–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

#### users_handler.py
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü–æ–∏—Å–∫ –ø–æ ID
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞/—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

#### strategies_handler.py
- –°–ø–∏—Å–æ–∫ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- –ê–∫—Ç–∏–≤–∞—Ü–∏—è/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è
- –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### tokens_handler.py
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤ (–æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ/–º–Ω–æ–≥–æ—Ä–∞–∑–æ–≤—ã–µ)
- –°–ø–∏—Å–æ–∫ —Ç–æ–∫–µ–Ω–æ–≤
- –î–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤

#### logs_handler.py
- –°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏
- –õ–æ–≥–∏ —Ä–µ—à–µ–Ω–∏–π AI
- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

#### ai_chat_handler.py
- –î–∏–∞–ª–æ–≥ —Å AI
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
- –ê–Ω–∞–ª–∏–∑ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

#### settings_handler.py
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞
- –°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- –û–±—â–∏–µ callback'–∏ (main_menu, noop)

### ‚å®Ô∏è keyboards/

#### admin_keyboards.py
**–í—Å–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –±–æ—Ç–∞**

Reply –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã:
- `get_main_menu_keyboard()` - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

Inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã:
- `get_users_menu_keyboard()` - –ú–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `get_user_action_keyboard()` - –î–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- `get_subscription_types_keyboard()` - –¢–∏–ø—ã –ø–æ–¥–ø–∏—Å–æ–∫
- `get_strategies_menu_keyboard()` - –ú–µ–Ω—é —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
- `get_tokens_menu_keyboard()` - –ú–µ–Ω—é —Ç–æ–∫–µ–Ω–æ–≤
- `get_logs_menu_keyboard()` - –ú–µ–Ω—é –ª–æ–≥–æ–≤
- `get_ai_chat_keyboard()` - AI-—á–∞—Ç
- –ò –¥—Ä—É–≥–∏–µ...

### üõ° middleware/

#### admin_middleware.py
**–ö–ª–∞—Å—Å AdminMiddleware** - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤

```python
class AdminMiddleware(BaseMiddleware):
    async def __call__(self, handler, event, data):
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ ID –≤ ADMIN_IDS
        # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π
        # –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö
```

–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ –≤—Å–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è–º –∏ callback'–∞–º.

### ü§ñ services/

#### ai_strategy_service.py
**–ö–ª–∞—Å—Å AIStrategyService** - –†–∞–±–æ—Ç–∞ —Å OpenAI

```python
class AIStrategyService:
    def __init__(self):
        self.client = AsyncOpenAI()
        self.conversations = {}
    
    async def send_message(user_id, message):
        # –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ OpenAI
        
    async def process_message_with_context(user_id, message):
        # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º —Ç–æ—Ä–≥–æ–≤–ª–∏
        
    async def save_strategy(strategy_data):
        # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Supabase
```

Singleton –ø–∞—Ç—Ç–µ—Ä–Ω:
```python
ai_service = AIStrategyService()
```

### üîß utils/

#### formatters.py
**–§—É–Ω–∫—Ü–∏–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**

- `format_user_info()` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- `format_strategy_info()` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- `format_token_info()` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–∫–µ–Ω–µ
- `format_log_entry()` - –ó–∞–ø–∏—Å—å –ª–æ–≥–∞
- `format_decision_log()` - –õ–æ–≥ —Ä–µ—à–µ–Ω–∏—è AI
- `format_statistics()` - –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `format_datetime()` - –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è
- `format_json()` - JSON –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `paginate_list()` - –ü–∞–≥–∏–Ω–∞—Ü–∏—è

#### validators.py
**–§—É–Ω–∫—Ü–∏–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏**

- `validate_telegram_id()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ Telegram ID
- `validate_subscription_type()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ –ø–æ–¥–ø–∏—Å–∫–∏
- `validate_token()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ —Ç–æ–∫–µ–Ω–∞
- `validate_strategy_name()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–µ–Ω–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- `validate_assets_list()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–æ–≤
- `validate_timeframe()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞
- `sanitize_input()` - –û—á–∏—Å—Ç–∫–∞ –≤–≤–æ–¥–∞
- `is_valid_email()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ email

## üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

### 1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É
```
Telegram ‚Üí bot.py ‚Üí Dispatcher ‚Üí AdminMiddleware ‚Üí Handler
```

### 2. Handler –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å
```
Handler ‚Üí Database/Service ‚Üí Supabase/OpenAI ‚Üí Handler
```

### 3. –û—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
```
Handler ‚Üí Keyboard ‚Üí Telegram
```

## üóÑ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü—ã Supabase

1. **users** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
2. **strategies** - –¢–æ—Ä–≥–æ–≤—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
3. **invite_tokens** - –¢–æ–∫–µ–Ω—ã –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
4. **system_logs** - –°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏
5. **decision_logs** - –õ–æ–≥–∏ —Ä–µ—à–µ–Ω–∏–π AI
6. **signals** - –¢–æ—Ä–≥–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã
7. **trades** - –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ç—Ä–µ–π–¥—ã
8. **bot_settings** - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞

–ü–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ö–µ–º–∞ –≤ `supabase_schema.sql`

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Middleware
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∑–∞–ø—Ä–æ—Å–æ–º

### –í–∞–ª–∏–¥–∞—Ü–∏—è
–í—Å–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ö–æ–¥—è—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –∞–¥–º–∏–Ω–æ–≤ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è

### Environment
–ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ –≤ .env

## üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –£—Ä–æ–≤–Ω–∏
- `INFO` - –û–±—ã—á–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
- `WARNING` - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- `ERROR` - –û—à–∏–±–∫–∏

### –§–∞–π–ª—ã
- –ö–æ–Ω—Å–æ–ª—å (stdout)
- `admin_bot.log` (—Ñ–∞–π–ª)

## üß© –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞

1. –°–æ–∑–¥–∞–π—Ç–µ handler:
```python
# handlers/new_handler.py
from aiogram import Router
router = Router()

@router.message(F.text == "–ù–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª")
async def new_section(message: Message):
    await message.answer("–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è!")
```

2. –î–æ–±–∞–≤—å—Ç–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É:
```python
# keyboards/admin_keyboards.py
def get_new_keyboard():
    return InlineKeyboardMarkup(...)
```

3. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ:
```python
# handlers/__init__.py
from . import new_handler
main_router.include_router(new_handler.router)
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã

1. –°–æ–∑–¥–∞–π—Ç–µ –≤ Supabase
2. –î–æ–±–∞–≤—å—Ç–µ –º–µ—Ç–æ–¥—ã –≤ `supabase_connector.py`
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ handlers

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å
–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ I/O –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
–î–∏–∞–ª–æ–≥–∏ AI —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏

### –ü–∞–≥–∏–Ω–∞—Ü–∏—è
–î–ª–∏–Ω–Ω—ã–µ —Å–ø–∏—Å–∫–∏ —Ä–∞–∑–±–∏–≤–∞—é—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

## üîÑ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª

### Startup
1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
2. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase
3. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–æ–≤
4. –ó–∞–ø—É—Å–∫ polling

### Runtime
1. –ü–æ–ª—É—á–µ–Ω–∏–µ update
2. Middleware –ø—Ä–æ–≤–µ—Ä–∫–∞
3. Routing –∫ handler
4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –æ—Ç–≤–µ—Ç

### Shutdown
1. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ polling
2. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–æ–≤
3. –ó–∞–∫—Ä—ã—Ç–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

---

**–í–µ—Ä—Å–∏—è:** 1.0.0
**–î–∞—Ç–∞:** 2025-12-11
