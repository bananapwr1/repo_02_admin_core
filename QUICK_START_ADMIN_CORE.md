# üöÄ –ë—ã—Å—Ç—Ä—ã–π –°—Ç–∞—Ä—Ç - Admin Core

## üìã –ß–µ–∫–ª–∏—Å—Ç –£—Å—Ç–∞–Ω–æ–≤–∫–∏

### ‚úÖ –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

**–ù–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å:** `cryptography==42.0.5`

---

### ‚úÖ –®–∞–≥ 2: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ö–ª—é—á–∞ –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è

**–í–∞—Ä–∏–∞–Ω—Ç –ê: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç**
```bash
python generate_encryption_key.py
```

**–í–∞—Ä–∏–∞–Ω—Ç –ë: –ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É**
```bash
python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
```

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –∫–ª—é—á.

---

### ‚úÖ –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env —Ñ–∞–π–ª–∞

–û—Ç–∫—Ä–æ–π—Ç–µ `.env` –∏ –¥–æ–±–∞–≤—å—Ç–µ/–æ–±–Ω–æ–≤–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```env
# ============= –û–°–ù–û–í–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò =============
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here

# ============= SUPABASE (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!) =============
SUPABASE_BASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_KEY=your_service_role_key_200plus_chars

# ============= –ù–û–í–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï =============
# Chat ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
# –£–∑–Ω–∞—Ç—å –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ @userinfobot –∏–ª–∏ @getmyid_bot
ADMIN_USER_ID=123456789

# –ö–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è (—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ —à–∞–≥–µ 2)
SUPABASE_ENCRYPTION_KEY=–ø–æ–ª—É—á–µ–Ω–Ω—ã–π_–∫–ª—é—á_—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è

# (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è ‚Äî –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è)
```

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
- ‚úÖ `TELEGRAM_BOT_TOKEN` - —Ç–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –∞–¥–º–∏–Ω-–±–æ—Ç–∞
- ‚úÖ `SUPABASE_BASE_URL` - URL –≤–∞—à–µ–≥–æ Supabase –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ `SUPABASE_SERVICE_KEY` (–∏–ª–∏ `SUPABASE_KEY`) - Service Role Key (200+ —Å–∏–º–≤–æ–ª–æ–≤!)
- ‚úÖ `ADMIN_USER_ID` - –≤–∞—à Telegram ID
- ‚úÖ `SUPABASE_ENCRYPTION_KEY` - —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–ª—é—á

---

### ‚úÖ –®–∞–≥ 4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–∞–∑—ã –î–∞–Ω–Ω—ã—Ö

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –≤ Supabase SQL Editor:

```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª
cat supabase_migration_encrypted_fields.sql

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ Supabase Dashboard
# https://supabase.com/dashboard -> SQL Editor
```

–ò–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –Ω–∞–ø—Ä—è–º—É—é:

```sql
ALTER TABLE strategies 
ADD COLUMN IF NOT EXISTS api_keys_encrypted TEXT,
ADD COLUMN IF NOT EXISTS secret_keys_encrypted TEXT,
ADD COLUMN IF NOT EXISTS private_params_encrypted TEXT,
ADD COLUMN IF NOT EXISTS credentials_encrypted TEXT;
```

---

### ‚úÖ –®–∞–≥ 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:

```bash
python test_admin_core_features.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –ü–†–û–ô–î–ï–ù: –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
‚úÖ –ü–†–û–ô–î–ï–ù: –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
‚úÖ –ü–†–û–ô–î–ï–ù: –ê–∫—Ç–∏–≤–∞—Ü–∏—è/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è
‚úÖ –ü–†–û–ô–î–ï–ù: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ò—Ç–æ–≥–æ: 4/4 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ

üéâ –í–°–ï –¢–ï–°–¢–´ –ü–†–û–ô–î–ï–ù–´ –£–°–ü–ï–®–ù–û!
```

---

### ‚úÖ –®–∞–≥ 6: –ó–∞–ø—É—Å–∫ –ë–æ—Ç–∞

```bash
python bot.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
üöÄ Admin Core –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è...
‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞
‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Service Role Key)
‚úÖ Admin Core —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω!
```

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Telegram:**
–í—ã –¥–æ–ª–∂–Ω—ã –ø–æ–ª—É—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:
```
‚úÖ Admin Core –∑–∞–ø—É—â–µ–Ω!

üîê Service Role Key –∞–∫—Ç–∏–≤–µ–Ω
üìä –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º–∏
```

---

## üéØ –ë—ã—Å—Ç—Ä–∞—è –ü—Ä–æ–≤–µ—Ä–∫–∞ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

### –¢–µ—Å—Ç 1: –°–æ–∑–¥–∞–Ω–∏–µ –°—Ç—Ä–∞—Ç–µ–≥–∏–∏

```python
from services import get_strategy_manager
import asyncio

async def test():
    manager = get_strategy_manager()
    
    strategy_id = await manager.create_strategy(
        name="Test Strategy",
        description="Testing Admin Core",
        is_active=False,
        assets_to_monitor=["BTC/USDT"],
        api_keys={"test": "secret_key"}  # –ë—É–¥–µ—Ç –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ
    )
    
    print(f"‚úÖ –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Å–æ–∑–¥–∞–Ω–∞: ID {strategy_id}")

asyncio.run(test())
```

### –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è

```python
from services.strategy_manager_service import EncryptionService

encryption = EncryptionService()

# –®–∏—Ñ—Ä—É–µ–º
encrypted = encryption.encrypt("my_secret_data")
print(f"–ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ: {encrypted[:30]}...")

# –†–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞–µ–º
decrypted = encryption.decrypt(encrypted)
print(f"–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ: {decrypted}")
```

### –¢–µ—Å—Ç 3: –û—Ç–ø—Ä–∞–≤–∫–∞ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–æ—Ç–∞ - –≤—ã –ø–æ–ª—É—á–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

---

## üîç –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ü—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞ 1: "SUPABASE_ENCRYPTION_KEY –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ì–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∫–ª—é—á
python generate_encryption_key.py

# –î–æ–±–∞–≤—å—Ç–µ –≤ .env
SUPABASE_ENCRYPTION_KEY=–ø–æ–ª—É—á–µ–Ω–Ω—ã–π_–∫–ª—é—á
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: "ADMIN_USER_ID –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# 1. –û—Ç–∫—Ä–æ–π—Ç–µ @userinfobot –≤ Telegram
# 2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
# 3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–∞—à ID
# 4. –î–æ–±–∞–≤—å—Ç–µ –≤ .env
ADMIN_USER_ID=–≤–∞—à_id
```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: "–¢–∞–±–ª–∏—Ü–∞ strategies –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –í—ã–ø–æ–ª–Ω–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—É—é —Å—Ö–µ–º—É –ë–î
cat supabase_schema.sql
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ Supabase SQL Editor
```

### –ü—Ä–æ–±–ª–µ–º–∞ 4: "Invalid API key" –æ—Ç Supabase

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Service Role Key, –∞ –Ω–µ Anon Key
# Service Role Key:
# - –î–ª–∏–Ω–∞ 200+ —Å–∏–º–≤–æ–ª–æ–≤
# - –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å "eyJ"
# - –ù–∞—Ö–æ–¥–∏—Ç—Å—è –≤ Supabase Dashboard -> Settings -> API -> service_role
```

### –ü—Ä–æ–±–ª–µ–º–∞ 5: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. ‚úÖ `ADMIN_USER_ID` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
2. ‚úÖ –ë–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ —á–∞—Ç/—Ä–∞–∑–≥–æ–≤–æ—Ä
3. ‚úÖ –ë–æ—Ç –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
4. ‚úÖ `TELEGRAM_BOT_TOKEN` –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –†–µ—Å—É—Ä—Å—ã

- **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `ADMIN_CORE_IMPLEMENTATION.md`
- **–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:** `EXAMPLES_USAGE.md`
- **–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥:**
  - `services/notification_service.py`
  - `services/strategy_manager_service.py`

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –≤ –ø—Ä–æ–¥–∞–∫—à–Ω –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

- [ ] ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã (`python3 test_admin_core_features.py`)
- [ ] ‚úÖ `SUPABASE_ENCRYPTION_KEY` —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] ‚úÖ `ADMIN_USER_ID` –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] ‚úÖ `SUPABASE_SERVICE_KEY` (–∏–ª–∏ `SUPABASE_KEY`) –ø—Ä–æ–≤–µ—Ä–µ–Ω (200+ —Å–∏–º–≤–æ–ª–æ–≤)
- [ ] ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
- [ ] ‚úÖ –ü–æ–ª—É—á–µ–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞
- [ ] ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞ —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
- [ ] ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

## üéâ –ì–æ—Ç–æ–≤–æ!

Admin Core –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å Trading Core (Bot-1)
2. –°–æ–∑–¥–∞–π—Ç–µ UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º–∏
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

**–î–∞—Ç–∞:** 11 –¥–µ–∫–∞–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–ü–æ–¥–¥–µ—Ä–∂–∫–∞:** –°–º. `ADMIN_CORE_IMPLEMENTATION.md`
